{{ define "main" }}

<!-- Hero Section -->
{{ with .Params.hero }}
<section class="hero">
  <div class="container">
    <div class="hero__content">
      <h1 class="hero__title">{{ .title }}</h1>
      <p class="hero__subtitle">{{ .subtitle }}</p>
      <div class="hero__buttons">
        {{ with .primary_cta }}
        <a href="{{ .url }}" class="btn btn--primary btn--large">
          {{ .text }}
          {{ partial "icons/arrow-right.html" }}
        </a>
        {{ end }}
        {{ with .secondary_cta }}
        <a href="{{ .url }}" class="btn btn--secondary btn--large">{{ .text }}</a>
        {{ end }}
      </div>
    </div>
  </div>
</section>
{{ end }}

<!-- Borrower Types Section -->
{{ with .Params.borrower_types }}
<section class="section">
  <div class="container">
    <div class="section__header">
      <h2>{{ .title }}</h2>
    </div>
    
    <div class="borrower-cards">
      {{ range .items }}
      <div class="borrower-card">
        <div class="borrower-card__icon">
          {{ partial (printf "icons/%s.html" .icon) }}
        </div>
        <h3>{{ .title }}</h3>
        <p>{{ .description }}</p>
        <a href="{{ .link_url }}" class="card__link">Learn more →</a>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Calculator Section -->
<section class="section section--cream" id="calculator">
  <div class="container">
    <div class="section__header">
      <h2>Run the Numbers</h2>
      <p>Get an estimate of what you could borrow or what your monthly payments might look like.</p>
    </div>
    
    <div class="calculator-body">
      <div class="calculator-tabs">
        <button class="calculator-tab active" data-tab="borrow">How much can I borrow?</button>
        <button class="calculator-tab" data-tab="payments">Monthly Payments</button>
        <button class="calculator-tab" data-tab="stamp">Stamp Duty</button>
      </div>
      
      <div class="calculator-content" id="calculatorContent">
        <div class="calculator-panel active" data-panel="borrow">
          <div class="form-group">
            <label class="form-label">Your Annual Income (before tax)</label>
            <input type="number" class="form-input" id="income1" placeholder="£50,000" value="50000">
          </div>
          <div class="form-group">
            <label class="form-label">Partner's Annual Income (optional)</label>
            <input type="number" class="form-input" id="income2" placeholder="£0" value="0">
          </div>
          <div class="form-group">
            <label class="form-label">Deposit Amount</label>
            <input type="number" class="form-input" id="deposit" placeholder="£25,000" value="25000">
          </div>
          
          <div class="calculator-result">
            <p class="calculator-result__label">Based on these figures, you could borrow up to:</p>
            <div class="calculator-result__value" id="borrowResult">£225,000</div>
            <p class="calculator-result__note">This is an estimate. The actual amount depends on your credit score and lender criteria.</p>
          </div>
          
          <div class="calculator-cta">
            <a href="/wellness-check/" class="btn btn--charcoal">Get an Accurate Figure</a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Trust Bar -->
{{ with .Params.trust_bar }}
<section class="trust-bar-section">
  <div class="container">
    <div class="trust-bar">
      <span class="trust-bar__main">{{ .main_text }}</span>
      <span class="trust-bar__lenders">{{ .lenders }}</span>
    </div>
  </div>
</section>
{{ end }}

<!-- Comparison Section -->
{{ with .Params.comparison }}
<section class="section">
  <div class="container">
    <div class="section__header">
      <h2>{{ .title }}</h2>
    </div>
    
    <table class="comparison-table">
      <thead>
        <tr>
          <th>Feature</th>
          <th>B Mortgage Services</th>
          <th>High Street Bank</th>
        </tr>
      </thead>
      <tbody>
        {{ range .features }}
        <tr>
          <td>{{ .feature }}</td>
          <td class="{{ if eq .us true }}check{{ else }}cross{{ end }}">
            {{ if eq .us true }}✓{{ else }}{{ .us }}{{ end }}
          </td>
          <td class="{{ if eq .bank false }}cross{{ else if eq .bank true }}check{{ else }}neutral{{ end }}">
            {{ if eq .bank true }}✓{{ else if eq .bank false }}✗{{ else }}{{ .bank }}{{ end }}
          </td>
        </tr>
        {{ end }}
      </tbody>
    </table>
  </div>
</section>
{{ end }}

<!-- DIP CTA Section -->
{{ with .Params.dip_cta }}
<section class="section section--charcoal">
  <div class="container">
    <div class="dip-cta">
      <div class="dip-cta__content">
        <h2>{{ .title }}</h2>
        <p>{{ .subtitle }}</p>
      </div>
      <a href="{{ .cta_url }}" class="btn btn--primary btn--large">{{ .cta_text }}</a>
    </div>
  </div>
</section>
{{ end }}

<!-- FAQ Section -->
{{ with .Params.faqs }}
<section class="section">
  <div class="container">
    <div class="section__header">
      <h2>{{ .title }}</h2>
    </div>
    
    <div class="faq-list">
      {{ range .items }}
      <div class="faq-item">
        <button class="faq-question">{{ .question }}</button>
        <div class="faq-answer">
          <div class="faq-answer__content">{{ .answer }}</div>
        </div>
      </div>
      {{ end }}
    </div>
  </div>
</section>
{{ end }}

<!-- Final CTA -->
{{ with .Params.final_cta }}
<section class="section section--peach">
  <div class="container">
    <div class="cta-section">
      <h2>{{ .title }}</h2>
      <p>{{ .subtitle }}</p>
      <a href="{{ .cta_url }}" class="btn btn--primary btn--large">{{ .cta_text }}</a>
    </div>
  </div>
</section>
{{ end }}

<!-- Sticky Mobile CTA -->
<div class="sticky-cta">
  <a href="/contact/" class="btn btn--primary">Book a 15-Min Chat</a>
</div>

{{ end }}
